language: java
# safelist
branches:
  only:
  - master
  - stage
  - dev
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"

notifications:
  email: false
  irc:
    channels:
    - chat.freenode.net#skolarapp
    on_success: always
    on_failure: always
    use_notice: true
os:
- linux
#- osx
script: 
- ./gradlew stage

- if [ "$TRAVIS_BRANCH" == "dev" ]; then
  echo "Merging dev into stage";
  chmod a+x travisautomerge.bat;
  BRANCHES_TO_MERGE_REGEX='dev' BRANCH_TO_MERGE_INTO=stage GITHUB_REPO=M3ttle/stringCalcWeb ./travisautomerge.bat;
  echo "All done, quitting now"; exit 0; fi

#[[ $TRAVIS_PULL_REQUEST == “false” ]] && [[ $TRAVIS_BRANCH == “master” ]]